<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Coupled solid-fluid modelling</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!-- MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>

</head>

<body>
    <div class="reveal">
        <div class="slides">
            <!-- Section -->
            <section>
              <section>
                <h2>Computational Geomechanics</h2>
                <h3>LBM-DEM, HPC, GPU, and Devops</h3>
                <p>
                  <br/>Krishna Kumar, <a href="mailto:kks32@cam.ac.uk">kks32@cam.ac.uk</a>
                  <br/>University of Cambridge
                </p>
                <br/>
                <div style="float: left; width: 100%;">
                  <span style="float: left; width: 33%; text-align: center;">
                    <img style="border:0;" src="images/themes/cued.png" width="100%">
                  </span>
                  <span style="float: left; width: 33%; text-align: center;">
                    <img style="border:0;" src="images/themes/cb-geo-text-white.png" width="100%">
                  </span>
                  <span style="float: right; width: 33%; text-align: center;">
                    <img style="border:0;" src="images/themes/berkeley.png" width="100%">
                  </span>
                </div>
                <br/><br/>
                <h4>ARO workshop on terrain modelling and simulation,<br/>Chicago, IL. 17 - 18 August 2016.</h4>
              </section>

              <!-- Cambridge -->
	      <section data-background="images/kings-college.jpg" data-background-size="80%">
              </section>

              <!-- Multi-scale modelling-->
              <section data-background="images/multiscale.png" data-background-size="80%">
              </section>
                            
              <!-- Numerical methods -->
              <section>
                <h3>Cambridge-Berkeley computational geomechanics</h3>
                <ul>
                  <li> Lattice-Boltzmann + Discrete Element Method </li>
                  <li> Finite Element Method - Thermo-Hydro Mechanical Coupling</li>
                  <li> Material Point Method </li>
                  <li> Lattice Element Method </li>
                </ul>
                <figure>
                  <img src="images/themes/cb-geo.png" width ="100%">
                  <figcaption><a href="http://www.cb-geo.com">View the CB-Geo website for 
                      more information and software tools</a></figcaption>
                </figure>
              </section>
            </section>

            <!-- LBM - DEM -->
            <section>
              <!-- LBM DEM a6 -->
              <section>
                <h3>LBM - DEM simulation of granular collapse in fluid</h3>
                <br/>
                <video  width="100%" controls loop>
                  <source src="media/a6.webm" type="video/webm">
  	            Your browser does not support the video tag.
                </video>
                <br/>
                <br/>aspect ratio 'a' of 6 <br />
              </section>

              <!-- LBM MRT -->
              <section>
                <h2> Lattice Boltzmann - MRT </h2>
                <div style="float: left; width: 47%;">
                  <figure>
	            <img src="images/lbm_fluid.png" width ="80%">
	            <figcaption style = "font-size: 80%; text-align: center; "> Real Fluid vs LBM Idealisation </figcaption>
                  </figure>
                </div>

                <div style="float: right; width: 47%;">
                  <figure>
		    <img src="images/d2q9.png" width = "80%">
		    <figcaption style = "font-size: 80%; text-align: center;">
                      LBM D2Q9 Model
                    </figcaption>
		  </figure>
	        </div>
	        <br/>
	        <div style="clear: both; width: 85%">
	          \[f_{i}(x + dx, t +\Delta t) - f_{i}(x, t) = -S_{\alpha i}(
                  f_{i}(x, t) - f_{i} ^ {eq}(x, t))\]
                </div>
                <ul>
                  <li>$S_{\alpha i}$ is the collisional matrix.</li>
                  <li>Probability density of finding a particle : $f(x,\varepsilon, t) $,
                    where, x is position, $\varepsilon$ is velocity, and t is time.</li>
                </ul>
                <div style="float: left; width: 47%;">
                  <figure><img src = "images/stream.png" width = "80%">
                    <figcaption style = "font-size: 80%; text-align: center;">
                      Streaming
                    </figcaption>
                  </figure>
                </div>
                <div style="float: right; width: 47%;">
                  <figure>
                    <img src = "images/collision.png" width = "80%">
                    <figcaption style = "font-size: 80%; text-align: center;">
                      Collision
                    </figcaption>
                  </figure>
                </div>
              </section>

              <!-- LBM-DEM fluid solid coupling -->
              <section>
   	        <h3>LBM-DEM fluid-solid coupling </h3>
                <div style="float: left; width: 70%;">
                  <figure>
                    <img src="images/lbm-dem.png" width = "70%">
                  </figure>
	          <div class = "block">
	            $$\Delta t_{s}=\frac{\Delta t}{\mathit{n}_{s}} \qquad (\mathit{n}_{s}=[\Delta t/ \Delta t_{D}]+1) $$
	          </div>
 	          <ul>
		    <li>At every fluid iteration, $\mathit{n}_{s}$ 
		      sub-steps of DEM iterations are performed using the time step $\Delta t_{s}$. </li>
		    <li>The hydrodynamic force is unchanged during the sub-cycling. </li>
	          </ul>
                </div>
                <div style="float: right; width: 30%;">
                  <video id="Kissing" width="50%" controls loop>
                    <source src="media/tumble.webm" type="video/webm">
                      Your browser does not support the video tag.
                  </video>
                </div>
              </section>

              <!-- Turulence modelling in LBM -->
              <section>
		<h2>LBM laminar & turbulent flows</h2>
                <div style="float: left; width: 47%;">
		  <figure>
		    <img src="images/obstacle_lbm.png" width ="80%">
		    <figcaption style = "font-size: 80%; text-align: center; ">
                      Lattice Boltzmann
                    </figcaption>
		  </figure>
		  <br />
		  <figure>
		    <img src="images/obstacle_cfd.png" width ="85%">
		    <figcaption style = "font-size: 80%; text-align: center; ">
                      CFD
                    </figcaption>
		  </figure>
	        </div>
                <div style="float: right; width: 47%;">
	  	  <figure>
	  	    <img src="images/poiseuille.png" width ="70%">
	  	    <figcaption style = "font-size: 80%; text-align: center;">
                      Poiseuille Flow
                    </figcaption>
	  	  </figure>
                  <p> Smagorinsky model (LES):</p>
                  $\nu_{s}(x,t)=(C_s \Delta)^2\sqrt{S_{ij}S_{ij}} \mbox{  ;  } S_{ij}=\frac{1}{2}(\frac{\partial u_i}{\partial x_j}+\frac{\partial u_j}{\partial x_i})$
	  	  <video  id="Karman" width="120%" controls>
	  	    <source src="media/karman.webm" type="video/webm">
	  	      Your browser does not support the video tag.
		  </video>
		  <br/>Karman Vortex Street
                </div>
              </section>


              <!-- LBM-DEM code -->
              <section>
                <h3>LBM-DEM implementation</h3>
                <div style="float: left; width: 45%;">
                  <ul>
                    <li>C-99 code</li>
                    <li>OpenACC GPU version 2.0</li>
                    <li>Visualisation VTK</li>
                    <li>2D LBM-DEM Code</li>
                    <ul>
                      <li>D2Q9 model for fluid</li>
                      <li>Pressure and velocity boundaries</li>
                      <li>Periodic boundary condition</li>
                      <li>Multi-Relaxation Time for numerical stability</li>
                      <li>Turbulence</li>
                      <li>2D discs</li>
                    </ul>
	            <li>Voronoi Tesselation in 2D/3D</li>
	            <li>Cumulative $\beta$ distribution</li>
                  </ul>
                </div>
                <div style="float: right; width: 55%;">
                  <img src="images/gpu_concept.png" width ="100%">
                </div>
              </section>

              <!-- LBM-DEM multi-GPU implementation -->
              <section>
                <h3>LBM-DEM multi-GPU implementation</h3>
                <figure>
                  <img src="images/multi-gpu.png" width ="90%">
                </figure>
              </section>

              <!-- GPU implementation - code snippet -->
              <section>
                <h3>LBM-DEM GPU implementation</h3>
                <pre>
                  <code class="cpp">
// Assign to each OpenMP a different GPU
int n_gpus = acc_get_num_devices( acc_device_nvidia );
if( n_gpus )
  acc_set_device_num( tid % n_gpus, acc_device_nvidia );
else 
  acc_set_device_type( acc_device_host );

#pragma acc parallel copyout(             \
  fhf1[0 : nbgrains],                     \
  fhf2[0 : nbgrains], fhf3[0 : nbgrains]) \
  copyin(obst[0 :][0 :], g[0 : nbgrains], \
  ey[0 :], f[0 :][0 :][0 :], ex[0 :]),    \
  ey[0 :], f[0: ][y_start : y_end][0 :], ex[0 :])
                </code></pre>  
              </section>


              <!--LBM DEM 10,000 particles-->
              <section>
                <h3>LBM - DEM a = 0.8 & 10,000 partilces</h3>
                <br/>
                <video  width="100%" controls loop>
                  <source src="media/a08_r095_7000.webm" type="video/webm">
                    Your browser does not support the video tag.
                </video>
                <br/>
                <ul>
                  <li> LBM Nodes = 50 Million : DEM grains = 10000 discs </li>
                  <li> Real-time = 5 seconds </li>
                  <li> Run-time = 4 hours </li>
                  <li> Speedup = 125x on a GE-Force GTX 580</li>
              </section>              
            </section>

            <!-- Dry v Fluid -->
            <section>
              <!-- ************************* Slide ************************************-->
              <section>
                <h2>Modelling of landsections (Locat and Lee, 2002)</h2>
                <div style="float: left; width: 55%;">
                  <strong>Energy transfer: </strong>
                  <ul>
                    <li>$E_p + E_s = E_k + E_f + E_D + E_v  + E_r $ </li>
                    <li>$E_p$: Potential, $E_k$: Kinetic, $E_s$: Seismic,</li>
                    <li>$E_f$: Frictional, $E_D$: Drag, $E_v$: Viscous,</li>
                    <li>$E_r$: Remoulded, transformation between solid and water</li>
                    <li>Run-out distance depends on the initial state</li>
                </div>
                <div style="float: right; width: 45%;">
                  <figure>
	            <img src="images/landslide.png" width="100%">
                  </figure>
                </div>
              </section>

              <!-- ************************* Section ************************************-->
              <section>
                <hgroup>
                  <h2>Collapse in fluid: Set-up</h2>
                </hgroup>
                <article class="smaller" style="text-align:left;">
                  <div class="figure">
                    <br /> <br />
                    <figure>
                      <img src = "images/geometry.png" width="85%">
                      <figcaption style="text-size: 60%"> Collapse in fluid ('a'=0.8)</figcaption>
                    </figure>
                  </div>
                </article>
              </section>

            </section>
            <section>
              <!-- Developments and future plans -->
              <section>
                <h2>Developments / future plans</h2>
                <div style="float: left; width: 60%;">
                  <ul>
                    <li>Generic templatised C++11/14 code</li>
	            <li>Live rendering of VTK using GPUs (inprogress)</li>
  	            <li>Multi-GPU support across nodes</li>
	            <li>LBM:</li>
	            <ul>
                      <li>3D LBM model</li>
                      <li>3D LB - DEM coupling</li>
                      <li>Two-phase LBM fluid flow</li>
	            </ul>
	            <li>DEM:</li>
	            <ul>
                      <li>3D DEM with different shapes</li>
	              <li>DEM simulations on GPU</li>
	              <li>Contact models for DEM</li>
	              <li>Special boundaries for DEM</li>
                      <li>Simulating billion DEM particles</li>
	            </ul>
                  </ul>
                </div>
                <div style="float: right; width: 40%;">
                  <figure>
                    <img src="images/liquid_clusters.jpg" width ="100%">
                    <figcaption>
                      LBM 2-phase
                    </figcaption>
                  </figure>
                  <figure>
                    <img src="images/dem.jpg" width ="100%">
                    <figcaption>
                      Millions of DEM particles
                    </figcaption>
                  </figure>
                </div>
              </section>

              <!-- Thank you! -->
              <section>
                <h1> Thank you!! </h1>
                <p>
                  <br/> Krishna Kumar, <a href="mailto:kks32@cam.ac.uk">kks32@cam.ac.uk</a>
                </p>
                <br/>
                <br/><br/>

                <div style="float: left; width: 100%;">
                  <span style="float: left; width: 33%; text-align: center;">
                    <img style="border:0;" src="images/themes/cued.png" width="100%">
                  </span>
                  <span style="float: left; width: 33%; text-align: center;">
                    <img style="border:0;" src="images/themes/cb-geo-text-white.png" width="100%">
                  </span>
                  <span style="float: right; width: 33%; text-align: center;">
                    <img style="border:0;" src="images/themes/berkeley.png" width="100%">
                  </span>
                </div>
              </section>
            </section>
            <!-- Special thanks to Chitra atthai! -->
        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            history: true,
            slideNumber: 'c/t',
            // More info https://github.com/hakimel/reveal.js#dependencies
            dependencies: [{
                src: 'plugin/markdown/marked.js'
            }, {
                src: 'plugin/markdown/markdown.js'
            }, {
                src: 'plugin/notes/notes.js',
                async: true
            }, {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function() {
                    hljs.initHighlightingOnLoad();
                }
            }]
        });
    </script>
</body>

</html>
